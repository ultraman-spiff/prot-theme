{{- 'section-trust-indicators.css' | asset_url | stylesheet_tag -}}

{%- liquid
  assign tiles_html = ''
-%}

<style>
  .{{ section.id }}.section_trust-indicators {
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
  }
</style>

{%- for block in section.blocks -%}
  {%- capture tile_html -%}
    <div class="color-{{ section.settings.color_scheme_for_blocks }} gradient">
      <div class="js-animation-fade-in">
        <div class="section-trust-indicators__content">
          {%- if block.settings.icon != blank or block.settings.custom_icon != blank -%}
            <div class="section-trust-indicators__icon">
              {% liquid
                assign icon_alt = block.settings.title_desktop | default: nil
                if block.settings.custom_icon
                  echo block.settings.custom_icon | image_url: width: 100 | image_tag: alt: icon_alt
                elsif block.settings.icon != blank
                  render 'icon', icon_name: block.settings.icon
                endif
              %}
            </div>
          {%- endif -%}

          {% if block.settings.title_desktop != blank or block.settings.title_mobile != blank%}
            <div class="section-trust-indicators__content-inner">
              <div class="section-trust-indicators__title for_desktop">
                {{- block.settings.title_desktop -}}
              </div>
              <div class="section-trust-indicators__title for_mobile">
                {{- block.settings.title_mobile -}}
              </div>
            </div>
          {% endif %}

        </div>
        {%- if block.settings.link_label != blank -%}
          <a href="{{- block.settings.link -}}" class="section-trust-indicators__link text-link">
            <span class="text-link--on-hover">
              {{- block.settings.link_label -}}
            </span>
          </a>
        {%- endif -%}
      </div>
    </div>
  {%- endcapture -%}

  {%- assign tiles_html = tiles_html | append: tile_html -%}
{%- endfor -%}

<div class="section_trust-indicators {{  section.id }} color-{{ section.settings.color_scheme }} gradient">
  <div class="{{ section.settings.section_width }} section-trust-indicators__content-container container">
    {{ tiles_html }}
  </div>
  {% if section.settings.button_label != blank %}
    <div class="container">
      <a class="section-trust-indicators__button button button--outlined" href="{{ section.settings.button_link }}">
        {{ section.settings.button_label }}
      </a>
    </div>
  {% endif %}
</div>

{% schema %}
{
  "name": "t:sections.trust-indicators.name",
  "tag": "section",
  "class": "section-trust-indicators",
  "settings": [
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button label",
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link",
      "default": "/"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme_for_blocks",
      "label": "t:sections.global.color_scheme.for__blocks.label",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "t:sections.global.header.settings.content",
      "info": "t:sections.global.header.settings.info"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.global.color_scheme.label",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Layout",
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 20
    },
    {
      "type": "range", 
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 20
    }
  ],
  "max_blocks": 10,
  "blocks": [
    {
      "type": "indicator",
      "name": "t:sections.trust-indicators.blocks.indicator.name",
      "settings": [
        {
          "type": "richtext",
          "id": "title_desktop",
          "label": "Destop title",
          "default": "<p>Title of the trust indicator</p>"
        },
        {
          "type": "richtext",
          "id": "title_mobile",
          "label": "Mobile title",
          "default": "<p>Title of the trust indicator</p>"
        },
        {
          "type": "text",
          "id": "icon",
          "label": "t:sections.global.element.icon.label",
          "info": "t:sections.global.element.icon.info",
          "default": "theme-box"
        },
        {
          "type": "image_picker",
          "id": "custom_icon",
          "label": "t:sections.global.element.icon.custom_icon.label",
          "info": "t:sections.global.element.icon.custom_icon.info"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.trust-indicators.name",
    }
  ]
}
{% endschema %}
