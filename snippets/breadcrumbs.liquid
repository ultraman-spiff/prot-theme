{%- comment -%}
  Accepts:

  -class: {String} - Class to be applied
  -alignment?: {String} - Alignemnt of the links. Accepts: 'center'
  -product_collection?: {Collection} - Add's first collection if assigned to the breadcrumb
{%- endcomment -%}

{%- liquid
  assign alignment = alignment | default: ''
  if alignment != ''
    assign class = class | default: '' | append: ' breadcrumbs--' | append: alignment
  else
    assign class = class | default: ''
  endif
-%}

<nav class="breadcrumbs no-scrollbar {{ class }} {{ template.name }}__breadcrumbs" role="navigation" aria-label="{{- 'theme.breadcrumb.label' | t -}}" itemscope itemtype="https://schema.org/BreadcrumbList">
  <ul class="breadcrumbs__list list-unstyled no-scrollbar" role="list">
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a href="{{- routes.root_url -}}" itemprop="item">
        <span itemprop="name" class="breadcrumbs__link button button--text">{{- 'theme.breadcrumb.home' | t -}}</span>
      </a>
      <meta itemprop="position" content="1" />
    </li>
    <li class="breadcrumbs__separator">/</li>
    {%- if product and collection -%}
      <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a href="{{- collection.url -}}" itemprop="item">
          <span itemprop="name" class="breadcrumbs__link button button--text">{{- collection.title | escape -}}</span>
        </a>
        <meta itemprop="position" content="2" />
      </li>
      <li class="breadcrumbs__separator">/</li>
    {%- endif -%}

    {%- if product_collection -%}
      <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        {%- if product_collection_multiple -%}
          {%- assign product_collection_count = product_collection | json | split: 'handle' | size | minus: 1 -%}
          {%- assign product_collection_first = product_collection | first -%}
          {%- if product_collection_count > 1 -%}
            <theme-dropdown class="theme-dropdown breadcrumbs__dropdown show-on--desktop">
              <button itemprop="name" class="dropdown-button breadcrumbs__link button button--text">
                {{ product_collection_first.title | escape }}
              </button>
              <div class="dropdown-content">
                <div class="dropdown-content__list slim-scrollbar">
                  {%- for col in product_collection -%}
                    <a href="{{ col.url }}">{{ col.title }}</a>
                  {%- endfor -%}
                </div>
              </div>
            </theme-dropdown>
            <a href="{{- product_collection_first.url -}}"  itemprop="item">
              <span itemprop="name" class="breadcrumbs__link button button--text show-on--mobile">
                {{- product_collection_first.title | escape -}}
              </span>
            </a>
          {%- else -%}
            <a href="{{- product_collection_first.url -}}"  itemprop="item">
              <span itemprop="name" class="breadcrumbs__link button button--text">
                {{- product_collection_first.title | escape -}}
              </span>
            </a>
          {%- endif -%}
        {%- else -%}
          {%- assign product_collection_first = product_collection -%}
          <a href="{{- product_collection_first.url -}}"  itemprop="item">
            <span itemprop="name" class="breadcrumbs__link button button--text">
              {{- product_collection_first.title | escape -}}
            </span>
          </a>
        {%- endif -%}
        <meta itemprop="position" content="2" />
      </li>
      <li class="breadcrumbs__separator">/</li>
    {%- endif -%}

    {%- if template.name == 'article' -%}
      <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a href="{{- blog.url -}}"  title="{{- blog.title | escape -}}" itemprop="item">
          <span itemprop="name" class="breadcrumbs__link button button--text">{{- blog.title | escape -}}</span>
        </a>
        <meta itemprop="position" content="2" />
      </li>
      <li class="breadcrumbs__separator">/</li>
    {%- endif -%}
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <span itemprop="name">
        {%- if template.name == 'index' -%}
          {{- 'theme.breadcrumb.home' | t -}}
        {%- elsif template.name == 'collection' -%}
          {{- collection.title | escape -}}
        {%- elsif template.name == 'product' -%}
          {{- product.title | escape -}}
        {%- elsif template.name == 'article' -%}
          {{- article.title | escape -}}
        {%- elsif template.name == 'page' -%}
          {{- page_title | escape -}}
        {%- elsif template.name == 'search' -%}
          {{- 'theme.breadcrumb.search' | t -}}
        {%- else -%}
          {{- page_title | escape -}}
        {%- endif -%}
        {% comment %} {%- if template.name != 'search' -%}
          {{- page_title | escape -}}
        {%- else -%}
          {{- 'theme.breadcrumb.search' | t -}}
        {%- endif -%} {% endcomment %}
      </span>
      <meta itemprop="position" content="3" />
    </li>
  </ul>
</nav>
